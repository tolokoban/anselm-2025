"use strict";(self.webpackChunkansy_2025=self.webpackChunkansy_2025||[]).push([[138],{9765(e,o,t){t.d(o,{A:()=>l});var n=t(1354),i=t.n(n),s=t(6314),r=t.n(s)()(i());r.push([e.id,".src-app-05-editor-\\[levelIndex\\]-_-SelectionLayer-SelectionLayer-module_selectionLayer_WX1MSw {\n    \n}","",{version:3,sources:["webpack://./src/app/05/editor/[levelIndex]/_/SelectionLayer/SelectionLayer.module.css"],names:[],mappings:"AAAA;;AAEA",sourcesContent:[".selectionLayer {\n    \n}"],sourceRoot:""}]),r.locals={selectionLayer:"src-app-05-editor-[levelIndex]-_-SelectionLayer-SelectionLayer-module_selectionLayer_WX1MSw"};const l=r},1793(e,o,t){t.d(o,{A:()=>l});var n=t(1354),i=t.n(n),s=t(6314),r=t.n(s)()(i());r.push([e.id,".src-app-05-editor-\\[levelIndex\\]-page-module_page_Rgnzp7 {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    display: grid;\n    grid-template-columns: auto 1fr;\n    place-items: stretch;\n\n    > .src-app-05-editor-\\[levelIndex\\]-page-module_preview_t2TO_P {\n        position: relative;\n        width: 100vh;\n        height: 100vh;\n        background-color: #000;\n\n        > * {\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n        }\n    }\n}\n","",{version:3,sources:["webpack://./src/app/05/editor/[levelIndex]/page.module.css"],names:[],mappings:"AAAA;IACI,kBAAkB;IAClB,OAAO;IACP,MAAM;IACN,WAAW;IACX,YAAY;IACZ,UAAU;IACV,aAAa;IACb,+BAA+B;IAC/B,oBAAoB;;IAEpB;QACI,kBAAkB;QAClB,YAAY;QACZ,aAAa;QACb,sBAAsB;;QAEtB;YACI,kBAAkB;YAClB,OAAO;YACP,MAAM;YACN,WAAW;YACX,YAAY;QAChB;IACJ;AACJ",sourcesContent:[".page {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    display: grid;\n    grid-template-columns: auto 1fr;\n    place-items: stretch;\n\n    > .preview {\n        position: relative;\n        width: 100vh;\n        height: 100vh;\n        background-color: #000;\n\n        > * {\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n        }\n    }\n}\n"],sourceRoot:""}]),r.locals={page:"src-app-05-editor-[levelIndex]-page-module_page_Rgnzp7",preview:"src-app-05-editor-[levelIndex]-page-module_preview_t2TO_P"};const l=r},5138(e,o,t){t.r(o),t.d(o,{default:()=>R});var n=t(4848),i=t(9419),s=t(8198),r=t(3947),l=t(5072),c=t.n(l),h=t(7825),a=t.n(h),w=t(7659),d=t.n(w),A=t(5056),p=t.n(A),u=t(540),v=t.n(u),g=t(1113),m=t.n(g),f=t(9765),y={};y.styleTagTransform=m(),y.setAttributes=p(),y.insert=d().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=v(),c()(f.A,y);const C=f.A&&f.A.locals?f.A.locals:void 0;function b({className:e,viewer:o}){return(0,n.jsx)("canvas",{className:k(e,C.selectionLayer),ref:o.init})}function k(...e){return e.filter(e=>"string"==typeof e).join(" ")}var _=t(6540),L=t(3340);class S{constructor(){this._canvas=null,this.ctx=null,this.cursorCol=-1,this.cursorRow=-1,this.raf=-1,this._selection={col1:0,row1:0,col2:25,row2:25},this.pointerDown=!1,this.col0=0,this.row0=0,this.init=e=>{if(this.detach(),this._canvas=e,e)return this._canvas=e,this.ctx=e.getContext("2d"),this.paint(),this.attach(),this.detach},this.growSelection=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e-2,col2:o+2,row1:t-1,row2:n+1}},this.growUp=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e,col2:o,row1:t-1,row2:n}},this.growDown=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e,col2:o,row1:t,row2:n+1}},this.growRight=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e,col2:o+2,row1:t,row2:n}},this.growLeft=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e-2,col2:o,row1:t,row2:n}},this.shrinkUp=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e,col2:o,row1:t,row2:n-1}},this.shrinkDown=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e,col2:o,row1:t+1,row2:n}},this.shrinkRight=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e+2,col2:o,row1:t,row2:n}},this.shrinkLeft=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e,col2:o-2,row1:t,row2:n}},this.shrinkSelection=()=>{const{col1:e,col2:o,row1:t,row2:n}=this.selection;this.selection={col1:e+2,col2:o-2,row1:t+1,row2:n-1}},this.moveSelection=(e,o)=>{const{col1:t,col2:n,row1:i,row2:s}=this.selection;this.selection={col1:t+e,col2:n+e,row1:i+o,row2:s+o}},this.moveRight=()=>this.moveSelection(1,0),this.moveLeft=()=>this.moveSelection(-1,0),this.moveUp=()=>this.moveSelection(0,-1),this.moveDown=()=>this.moveSelection(0,1),this.attach=()=>{const e=this._canvas;e&&(e.addEventListener("pointermove",this.handlePointerMove),e.addEventListener("pointerdown",this.handlePointerDown),e.addEventListener("pointerup",this.handlePointerUp),e.addEventListener("pointercancel",this.handlePointerCancel))},this.detach=()=>{const e=this._canvas;e&&(e.removeEventListener("pointermove",this.handlePointerMove),e.removeEventListener("pointerdown",this.handlePointerDown),e.removeEventListener("pointerup",this.handlePointerUp),e.removeEventListener("pointercancel",this.handlePointerCancel),this._canvas=null)},this.handlePointerMove=e=>{const o=this._canvas;if(!o)return;const{x2col:t,y2row:n}=x(o),i=t(e.clientX),s=n(e.clientY);if(this.pointerDown){const{col0:e,row0:o}=this;let t=i;return Math.abs(t-e)%2!=0&&(t+=t>e?1:-1),void(this.selection={col1:e,row1:o,col2:t,row2:s})}i===this.cursorCol&&s===this.cursorRow||(this.cursorCol=i,this.cursorRow=s,this.paint())},this.handlePointerDown=e=>{if(!this._canvas)return;console.log("DOWN"),this.pointerDown=!0;const o=this.cursorCol,t=this.cursorRow;this.selection={col1:o,row1:t,col2:o,row2:t},this.col0=o,this.row0=t,this.paint()},this.handlePointerUp=e=>{this.pointerDown=!1},this.handlePointerCancel=e=>{this.pointerDown=!1},this.paint=()=>{globalThis.cancelAnimationFrame(this.raf),this.raf=globalThis.requestAnimationFrame(this.actualPaint)},this.actualPaint=()=>{const e=this.ctx,o=this._canvas;if(!o||!e)return;o.width=o.clientWidth,o.height=o.clientHeight;const{col2x:t,row2y:n}=x(o);e.clearRect(0,0,t(27),n(27));const{col1:i,col2:s,row1:r,row2:l}=this.selection;console.debug(JSON.stringify(this.selection)),e.fillStyle="rgba(255,255,255,0.1)",e.strokeStyle="#fff",e.lineWidth=4,e.beginPath(),e.rect(t(i),n(r),t(2+s-i),n(1+l-r)),e.closePath(),e.fill(),e.stroke();const c=this.cursorCol,h=this.cursorRow;e.fillStyle="rgba(0,200,255,0.1)",e.strokeStyle="rgb(0,200,255)",e.lineWidth=2,e.beginPath(),e.rect(t(c),n(h),t(2),n(1)),e.closePath(),e.fill(),e.stroke()}}get selection(){return this._selection}set selection(e){const o=(0,L.O6b)(Math.min(e.col1,e.col2),0,25),t=(0,L.O6b)(Math.max(e.col1,e.col2),0,25),n=(0,L.O6b)(Math.min(e.row1,e.row2),0,25),i=(0,L.O6b)(Math.max(e.row1,e.row2),0,25);o===this.selection.col1&&t===this.selection.col2&&n===this.selection.row1&&i===this.selection.row2||(this._selection={col1:o,col2:t,row1:n,row2:i},console.debug(JSON.stringify(this._selection)),this.paint())}}function x(e){const{width:o,height:t}=e;return{x2col:e=>Math.floor(26*e/o),y2row:e=>Math.floor(26*e/t),col2x:e=>.5+Math.round(o*Math.floor(e)/26),row2y:e=>.5+Math.round(t*Math.floor(e)/26)}}var I=t(1793),P={};P.styleTagTransform=m(),P.setAttributes=p(),P.insert=d().bind(null,"head"),P.domAPI=a(),P.insertStyleElement=v(),c()(I.A,P);const M=I.A&&I.A.locals?I.A.locals:void 0;function R(){const e=(0,i.lr)("levelIndex"),{levels:o}=(0,r.a)(),t=o[e],l=function(){const e=_.useRef(null);return e.current||(e.current=new S),e.current}();var c;return c={"+":l.growSelection,"-":l.shrinkSelection,ArrowRight:l.moveRight,ArrowLeft:l.moveLeft,ArrowUp:l.moveUp,ArrowDown:l.moveDown,"S-ArrowRight":l.growRight,"S-ArrowLeft":l.growLeft,"S-ArrowUp":l.growUp,"S-ArrowDown":l.growDown,"A-ArrowRight":l.shrinkRight,"A-ArrowLeft":l.shrinkLeft,"A-ArrowUp":l.shrinkUp,"A-ArrowDown":l.shrinkDown},_.useEffect(()=>{const e=e=>{let o=e.key;e.shiftKey&&(o=`S-${o}`),e.altKey&&(o=`A-${o}`);const t=c[o];t?(e.stopPropagation(),e.preventDefault(),t()):console.log("ðŸž [keyboard@8] id =",o)};return globalThis.document.addEventListener("keydown",e),()=>{globalThis.document.removeEventListener("keydown",e)}},[c]),(0,n.jsxs)("div",{className:M.page,children:[(0,n.jsxs)("div",{className:M.preview,children:[(0,n.jsx)(s.A,{level:t}),(0,n.jsx)(b,{viewer:l})]}),(0,n.jsx)("nav",{children:(0,n.jsxs)("h1",{children:["Level ",e]})})]})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2YsQ0V4U2dCQyxHQ2JULElBQXFCQyxFRCtCM0IsT0MvQjJCQSxFRGNmLENBQ0wsSUFBS2xHLEVBQU84QixjQUNaLElBQUs5QixFQUFPd0MsZ0JBQ1osV0FBY3hDLEVBQU80QyxVQUNyQixVQUFhNUMsRUFBTzZDLFNBQ3BCLFFBQVc3QyxFQUFPOEMsT0FDbEIsVUFBYTlDLEVBQU8rQyxTQUNwQixlQUFnQi9DLEVBQU9rQyxVQUN2QixjQUFlbEMsRUFBT21DLFNBQ3RCLFlBQWFuQyxFQUFPZ0MsT0FDcEIsY0FBZWhDLEVBQU9pQyxTQUN0QixlQUFnQmpDLEVBQU9zQyxZQUN2QixjQUFldEMsRUFBT3VDLFdBQ3RCLFlBQWF2QyxFQUFPb0MsU0FDcEIsY0FBZXBDLEVBQU9xQyxZQzNCMUIsWUFBZ0IsS0FDWixNQUFNOEQsRUFBaUI3QyxJQUNuQixJQUFJakUsRUFBS2lFLEVBQUk4QyxJQUNUOUMsRUFBSStDLFdBQVVoSCxFQUFLLEtBQUtBLEtBQ3hCaUUsRUFBSWdELFNBQVFqSCxFQUFLLEtBQUtBLEtBQzFCLE1BQU1rSCxFQUFTTCxFQUFVN0csR0FDckJrSCxHQUNBakQsRUFBSWtELGtCQUNKbEQsRUFBSW1ELGlCQUNKRixLQUVBekMsUUFBUUMsSUFBSSx1QkFBd0IxRSxJQUk1QyxPQURBMkUsV0FBVzBDLFNBQVMxRCxpQkFBaUIsVUFBV21ELEdBQ3pDLEtBQ0huQyxXQUFXMEMsU0FBU3JELG9CQUFvQixVQUFXOEMsS0FFeEQsQ0FBQ0QsS0RhTixpQkFBS25HLFVBQVcsRUFBTzRHLEtBQUksV0FDMUIsaUJBQUs1RyxVQUFXLEVBQU82RyxRQUFPLFdBQzdCLFNBQUNDLEVBQUEsRUFBYyxDQUFDZCxNQUFPQSxLQUN2QixTQUFDakcsRUFBYyxDQUFDRSxPQUFRQSxRQUV6QiwwQkFDQyxtQ0FBVzZGLFNBSWYsQyIsInNvdXJjZXMiOlsiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL2dhbWUvZ2FtZXMvYW5zZWxtLzIwMjUvc3JjL2FwcC8wNS9lZGl0b3IvW2xldmVsSW5kZXhdL18vU2VsZWN0aW9uTGF5ZXIvU2VsZWN0aW9uTGF5ZXIubW9kdWxlLmNzcyIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9nYW1lL2dhbWVzL2Fuc2VsbS8yMDI1L3NyYy9hcHAvMDUvZWRpdG9yL1tsZXZlbEluZGV4XS9wYWdlLm1vZHVsZS5jc3MiLCJ3ZWJwYWNrOi8vYW5zeS0yMDI1Ly4vc3JjL2FwcC8wNS9lZGl0b3IvW2xldmVsSW5kZXhdL18vU2VsZWN0aW9uTGF5ZXIvU2VsZWN0aW9uTGF5ZXIubW9kdWxlLmNzcz84OGU0IiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL2dhbWUvZ2FtZXMvYW5zZWxtLzIwMjUvc3JjL2FwcC8wNS9lZGl0b3IvW2xldmVsSW5kZXhdL18vU2VsZWN0aW9uTGF5ZXIvU2VsZWN0aW9uTGF5ZXIudHN4IiwiL2hvbWUvdG9sb2tvYmFuL0NvZGUvZ2l0aHViL2dhbWUvZ2FtZXMvYW5zZWxtLzIwMjUvc3JjL2FwcC8wNS9lZGl0b3IvW2xldmVsSW5kZXhdL18vU2VsZWN0aW9uTGF5ZXIvdmlld2VyLnRzIiwid2VicGFjazovL2Fuc3ktMjAyNS8uL3NyYy9hcHAvMDUvZWRpdG9yL1tsZXZlbEluZGV4XS9wYWdlLm1vZHVsZS5jc3M/MmYxMSIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9nYW1lL2dhbWVzL2Fuc2VsbS8yMDI1L3NyYy9hcHAvMDUvZWRpdG9yL1tsZXZlbEluZGV4XS9wYWdlLnRzeCIsIi9ob21lL3RvbG9rb2Jhbi9Db2RlL2dpdGh1Yi9nYW1lL2dhbWVzL2Fuc2VsbS8yMDI1L3NyYy9hcHAvMDUvZWRpdG9yL1tsZXZlbEluZGV4XS9fL1NlbGVjdGlvbkxheWVyL2tleWJvYXJkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAuc3JjLWFwcC0wNS1lZGl0b3ItXFxcXFtsZXZlbEluZGV4XFxcXF0tXy1TZWxlY3Rpb25MYXllci1TZWxlY3Rpb25MYXllci1tb2R1bGVfc2VsZWN0aW9uTGF5ZXJfV1gxTVN3IHtcbiAgICBcbn1gLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9hcHAvMDUvZWRpdG9yL1tsZXZlbEluZGV4XS9fL1NlbGVjdGlvbkxheWVyL1NlbGVjdGlvbkxheWVyLm1vZHVsZS5jc3NcIl0sXCJuYW1lc1wiOltdLFwibWFwcGluZ3NcIjpcIkFBQUE7O0FBRUFcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLnNlbGVjdGlvbkxheWVyIHtcXG4gICAgXFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ubG9jYWxzID0ge1xuXHRcInNlbGVjdGlvbkxheWVyXCI6IGBzcmMtYXBwLTA1LWVkaXRvci1bbGV2ZWxJbmRleF0tXy1TZWxlY3Rpb25MYXllci1TZWxlY3Rpb25MYXllci1tb2R1bGVfc2VsZWN0aW9uTGF5ZXJfV1gxTVN3YFxufTtcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIiwiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9BUElfU09VUkNFTUFQX0lNUE9SVF9fXyk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgYC5zcmMtYXBwLTA1LWVkaXRvci1cXFxcW2xldmVsSW5kZXhcXFxcXS1wYWdlLW1vZHVsZV9wYWdlX1JnbnpwNyB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDA7XG4gICAgdG9wOiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBwYWRkaW5nOiAwO1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBhdXRvIDFmcjtcbiAgICBwbGFjZS1pdGVtczogc3RyZXRjaDtcblxuICAgID4gLnNyYy1hcHAtMDUtZWRpdG9yLVxcXFxbbGV2ZWxJbmRleFxcXFxdLXBhZ2UtbW9kdWxlX3ByZXZpZXdfdDJUT19QIHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB3aWR0aDogMTAwdmg7XG4gICAgICAgIGhlaWdodDogMTAwdmg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG5cbiAgICAgICAgPiAqIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL2FwcC8wNS9lZGl0b3IvW2xldmVsSW5kZXhdL3BhZ2UubW9kdWxlLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtJQUNJLGtCQUFrQjtJQUNsQixPQUFPO0lBQ1AsTUFBTTtJQUNOLFdBQVc7SUFDWCxZQUFZO0lBQ1osVUFBVTtJQUNWLGFBQWE7SUFDYiwrQkFBK0I7SUFDL0Isb0JBQW9COztJQUVwQjtRQUNJLGtCQUFrQjtRQUNsQixZQUFZO1FBQ1osYUFBYTtRQUNiLHNCQUFzQjs7UUFFdEI7WUFDSSxrQkFBa0I7WUFDbEIsT0FBTztZQUNQLE1BQU07WUFDTixXQUFXO1lBQ1gsWUFBWTtRQUNoQjtJQUNKO0FBQ0pcIixcInNvdXJjZXNDb250ZW50XCI6W1wiLnBhZ2Uge1xcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICAgIGxlZnQ6IDA7XFxuICAgIHRvcDogMDtcXG4gICAgd2lkdGg6IDEwMCU7XFxuICAgIGhlaWdodDogMTAwJTtcXG4gICAgcGFkZGluZzogMDtcXG4gICAgZGlzcGxheTogZ3JpZDtcXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBhdXRvIDFmcjtcXG4gICAgcGxhY2UtaXRlbXM6IHN0cmV0Y2g7XFxuXFxuICAgID4gLnByZXZpZXcge1xcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICAgICAgd2lkdGg6IDEwMHZoO1xcbiAgICAgICAgaGVpZ2h0OiAxMDB2aDtcXG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XFxuXFxuICAgICAgICA+ICoge1xcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgICAgICAgICBsZWZ0OiAwO1xcbiAgICAgICAgICAgIHRvcDogMDtcXG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XFxuICAgICAgICB9XFxuICAgIH1cXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5sb2NhbHMgPSB7XG5cdFwicGFnZVwiOiBgc3JjLWFwcC0wNS1lZGl0b3ItW2xldmVsSW5kZXhdLXBhZ2UtbW9kdWxlX3BhZ2VfUmduenA3YCxcblx0XCJwcmV2aWV3XCI6IGBzcmMtYXBwLTA1LWVkaXRvci1bbGV2ZWxJbmRleF0tcGFnZS1tb2R1bGVfcHJldmlld190MlRPX1BgXG59O1xuZXhwb3J0IGRlZmF1bHQgX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uLy4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzZdLnVzZVsxXSEuL1NlbGVjdGlvbkxheWVyLm1vZHVsZS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1s2XS51c2VbMV0hLi9TZWxlY3Rpb25MYXllci5tb2R1bGUuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHN0eWxlcyBmcm9tIFwiLi9TZWxlY3Rpb25MYXllci5tb2R1bGUuY3NzXCI7XG5pbXBvcnQgdHlwZSB7IFNlbGVjdGlvblZpZXdlciB9IGZyb20gXCIuL3ZpZXdlclwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdGlvbkxheWVyUHJvcHMge1xuXHRjbGFzc05hbWU/OiBzdHJpbmc7XG5cdHZpZXdlcjogU2VsZWN0aW9uVmlld2VyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTZWxlY3Rpb25MYXllcih7XG5cdGNsYXNzTmFtZSxcblx0dmlld2VyLFxufTogU2VsZWN0aW9uTGF5ZXJQcm9wcykge1xuXHRyZXR1cm4gKFxuXHRcdDxjYW52YXNcblx0XHRcdGNsYXNzTmFtZT17am9pbihjbGFzc05hbWUsIHN0eWxlcy5zZWxlY3Rpb25MYXllcil9XG5cdFx0XHRyZWY9e3ZpZXdlci5pbml0fVxuXHRcdD48L2NhbnZhcz5cblx0KTtcbn1cblxuZnVuY3Rpb24gam9pbiguLi5jbGFzc2VzOiB1bmtub3duW10pOiBzdHJpbmcge1xuXHRyZXR1cm4gY2xhc3Nlcy5maWx0ZXIoKGNscykgPT4gdHlwZW9mIGNscyA9PT0gXCJzdHJpbmdcIikuam9pbihcIiBcIik7XG59XG4iLCJpbXBvcnQgeyB0Z2RDYWxjQ2xhbXAgfSBmcm9tIFwiQHRvbG9rb2Jhbi90Z2RcIlxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiXG5pbXBvcnQgdHlwZSB7IEFyZWFTZWxlY3Rpb24gfSBmcm9tIFwiLi90eXBlc1wiXG5cbmNvbnN0IENPTFMgPSAyNlxuY29uc3QgUk9XUyA9IDI2XG5cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25WaWV3ZXIge1xuICAgIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZT86IChzZWxlY3Rpb246IEFyZWFTZWxlY3Rpb24pID0+IHZvaWRcbiAgICBwcml2YXRlIF9jYW52YXM6IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbCA9IG51bGxcbiAgICBwcml2YXRlIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHwgbnVsbCA9IG51bGxcbiAgICBwcml2YXRlIGN1cnNvckNvbCA9IC0xXG4gICAgcHJpdmF0ZSBjdXJzb3JSb3cgPSAtMVxuICAgIHByaXZhdGUgcmFmID0gLTFcbiAgICBwcml2YXRlIF9zZWxlY3Rpb246IEFyZWFTZWxlY3Rpb24gPSB7XG4gICAgICAgIGNvbDE6IDAsXG4gICAgICAgIHJvdzE6IDAsXG4gICAgICAgIGNvbDI6IENPTFMgLSAxLFxuICAgICAgICByb3cyOiBST1dTIC0gMSxcbiAgICB9XG4gICAgcHJpdmF0ZSBwb2ludGVyRG93biA9IGZhbHNlXG4gICAgcHJpdmF0ZSBjb2wwID0gMFxuICAgIHByaXZhdGUgcm93MCA9IDBcblxuICAgIGdldCBzZWxlY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3Rpb25cbiAgICB9XG4gICAgcHJpdmF0ZSBzZXQgc2VsZWN0aW9uKHNlbGVjdGlvbjogQXJlYVNlbGVjdGlvbikge1xuICAgICAgICBjb25zdCBjb2wxID0gdGdkQ2FsY0NsYW1wKFxuICAgICAgICAgICAgTWF0aC5taW4oc2VsZWN0aW9uLmNvbDEsIHNlbGVjdGlvbi5jb2wyKSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBDT0xTIC0gMVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IGNvbDIgPSB0Z2RDYWxjQ2xhbXAoXG4gICAgICAgICAgICBNYXRoLm1heChzZWxlY3Rpb24uY29sMSwgc2VsZWN0aW9uLmNvbDIpLFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIENPTFMgLSAxXG4gICAgICAgIClcbiAgICAgICAgY29uc3Qgcm93MSA9IHRnZENhbGNDbGFtcChcbiAgICAgICAgICAgIE1hdGgubWluKHNlbGVjdGlvbi5yb3cxLCBzZWxlY3Rpb24ucm93MiksXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgUk9XUyAtIDFcbiAgICAgICAgKVxuICAgICAgICBjb25zdCByb3cyID0gdGdkQ2FsY0NsYW1wKFxuICAgICAgICAgICAgTWF0aC5tYXgoc2VsZWN0aW9uLnJvdzEsIHNlbGVjdGlvbi5yb3cyKSxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBST1dTIC0gMVxuICAgICAgICApXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbDEgPT09IHRoaXMuc2VsZWN0aW9uLmNvbDEgJiZcbiAgICAgICAgICAgIGNvbDIgPT09IHRoaXMuc2VsZWN0aW9uLmNvbDIgJiZcbiAgICAgICAgICAgIHJvdzEgPT09IHRoaXMuc2VsZWN0aW9uLnJvdzEgJiZcbiAgICAgICAgICAgIHJvdzIgPT09IHRoaXMuc2VsZWN0aW9uLnJvdzJcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NlbGVjdGlvbiA9IHsgY29sMSwgY29sMiwgcm93MSwgcm93MiB9XG4gICAgICAgIGNvbnNvbGUuZGVidWcoSlNPTi5zdHJpbmdpZnkodGhpcy5fc2VsZWN0aW9uKSlcbiAgICAgICAgdGhpcy5wYWludCgpXG4gICAgfVxuXG4gICAgcmVhZG9ubHkgaW5pdCA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbCkgPT4ge1xuICAgICAgICB0aGlzLmRldGFjaCgpXG4gICAgICAgIHRoaXMuX2NhbnZhcyA9IGNhbnZhc1xuICAgICAgICBpZiAoIWNhbnZhcykgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5fY2FudmFzID0gY2FudmFzXG4gICAgICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKVxuICAgICAgICB0aGlzLnBhaW50KClcbiAgICAgICAgdGhpcy5hdHRhY2goKVxuICAgICAgICByZXR1cm4gdGhpcy5kZXRhY2hcbiAgICB9XG5cbiAgICByZWFkb25seSBncm93U2VsZWN0aW9uID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbDEsIGNvbDIsIHJvdzEsIHJvdzIgfSA9IHRoaXMuc2VsZWN0aW9uXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0ge1xuICAgICAgICAgICAgY29sMTogY29sMSAtIDIsXG4gICAgICAgICAgICBjb2wyOiBjb2wyICsgMixcbiAgICAgICAgICAgIHJvdzE6IHJvdzEgLSAxLFxuICAgICAgICAgICAgcm93Mjogcm93MiArIDEsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWFkb25seSBncm93VXAgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29sMSwgY29sMiwgcm93MSwgcm93MiB9ID0gdGhpcy5zZWxlY3Rpb25cbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSB7XG4gICAgICAgICAgICBjb2wxOiBjb2wxLFxuICAgICAgICAgICAgY29sMjogY29sMixcbiAgICAgICAgICAgIHJvdzE6IHJvdzEgLSAxLFxuICAgICAgICAgICAgcm93Mjogcm93MixcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlYWRvbmx5IGdyb3dEb3duID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbDEsIGNvbDIsIHJvdzEsIHJvdzIgfSA9IHRoaXMuc2VsZWN0aW9uXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0ge1xuICAgICAgICAgICAgY29sMTogY29sMSxcbiAgICAgICAgICAgIGNvbDI6IGNvbDIsXG4gICAgICAgICAgICByb3cxOiByb3cxLFxuICAgICAgICAgICAgcm93Mjogcm93MiArIDEsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWFkb25seSBncm93UmlnaHQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29sMSwgY29sMiwgcm93MSwgcm93MiB9ID0gdGhpcy5zZWxlY3Rpb25cbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSB7XG4gICAgICAgICAgICBjb2wxOiBjb2wxLFxuICAgICAgICAgICAgY29sMjogY29sMiArIDIsXG4gICAgICAgICAgICByb3cxOiByb3cxLFxuICAgICAgICAgICAgcm93Mjogcm93MixcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlYWRvbmx5IGdyb3dMZWZ0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGNvbDEsIGNvbDIsIHJvdzEsIHJvdzIgfSA9IHRoaXMuc2VsZWN0aW9uXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uID0ge1xuICAgICAgICAgICAgY29sMTogY29sMSAtIDIsXG4gICAgICAgICAgICBjb2wyOiBjb2wyLFxuICAgICAgICAgICAgcm93MTogcm93MSxcbiAgICAgICAgICAgIHJvdzI6IHJvdzIsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWFkb25seSBzaHJpbmtVcCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBjb2wxLCBjb2wyLCByb3cxLCByb3cyIH0gPSB0aGlzLnNlbGVjdGlvblxuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIGNvbDE6IGNvbDEsXG4gICAgICAgICAgICBjb2wyOiBjb2wyLFxuICAgICAgICAgICAgcm93MTogcm93MSxcbiAgICAgICAgICAgIHJvdzI6IHJvdzIgLSAxLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVhZG9ubHkgc2hyaW5rRG93biA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBjb2wxLCBjb2wyLCByb3cxLCByb3cyIH0gPSB0aGlzLnNlbGVjdGlvblxuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIGNvbDE6IGNvbDEsXG4gICAgICAgICAgICBjb2wyOiBjb2wyLFxuICAgICAgICAgICAgcm93MTogcm93MSArIDEsXG4gICAgICAgICAgICByb3cyOiByb3cyLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVhZG9ubHkgc2hyaW5rUmlnaHQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29sMSwgY29sMiwgcm93MSwgcm93MiB9ID0gdGhpcy5zZWxlY3Rpb25cbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSB7XG4gICAgICAgICAgICBjb2wxOiBjb2wxICsgMixcbiAgICAgICAgICAgIGNvbDI6IGNvbDIsXG4gICAgICAgICAgICByb3cxOiByb3cxLFxuICAgICAgICAgICAgcm93Mjogcm93MixcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlYWRvbmx5IHNocmlua0xlZnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY29sMSwgY29sMiwgcm93MSwgcm93MiB9ID0gdGhpcy5zZWxlY3Rpb25cbiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSB7XG4gICAgICAgICAgICBjb2wxOiBjb2wxLFxuICAgICAgICAgICAgY29sMjogY29sMiAtIDIsXG4gICAgICAgICAgICByb3cxOiByb3cxLFxuICAgICAgICAgICAgcm93Mjogcm93MixcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlYWRvbmx5IHNocmlua1NlbGVjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBjb2wxLCBjb2wyLCByb3cxLCByb3cyIH0gPSB0aGlzLnNlbGVjdGlvblxuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIGNvbDE6IGNvbDEgKyAyLFxuICAgICAgICAgICAgY29sMjogY29sMiAtIDIsXG4gICAgICAgICAgICByb3cxOiByb3cxICsgMSxcbiAgICAgICAgICAgIHJvdzI6IHJvdzIgLSAxLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVhZG9ubHkgbW92ZVNlbGVjdGlvbiA9IChjb2w6IG51bWJlciwgcm93OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgeyBjb2wxLCBjb2wyLCByb3cxLCByb3cyIH0gPSB0aGlzLnNlbGVjdGlvblxuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIGNvbDE6IGNvbDEgKyBjb2wsXG4gICAgICAgICAgICBjb2wyOiBjb2wyICsgY29sLFxuICAgICAgICAgICAgcm93MTogcm93MSArIHJvdyxcbiAgICAgICAgICAgIHJvdzI6IHJvdzIgKyByb3csXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZWFkb25seSBtb3ZlUmlnaHQgPSAoKSA9PiB0aGlzLm1vdmVTZWxlY3Rpb24oKzEsIDApXG4gICAgcmVhZG9ubHkgbW92ZUxlZnQgPSAoKSA9PiB0aGlzLm1vdmVTZWxlY3Rpb24oLTEsIDApXG4gICAgcmVhZG9ubHkgbW92ZVVwID0gKCkgPT4gdGhpcy5tb3ZlU2VsZWN0aW9uKDAsIC0xKVxuICAgIHJlYWRvbmx5IG1vdmVEb3duID0gKCkgPT4gdGhpcy5tb3ZlU2VsZWN0aW9uKDAsICsxKVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBhdHRhY2ggPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuX2NhbnZhc1xuICAgICAgICBpZiAoIWNhbnZhcykgcmV0dXJuXG5cbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlKVxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuaGFuZGxlUG9pbnRlckRvd24pXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMuaGFuZGxlUG9pbnRlclVwKVxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJjYW5jZWxcIiwgdGhpcy5oYW5kbGVQb2ludGVyQ2FuY2VsKVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGV0YWNoID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9jYW52YXNcbiAgICAgICAgaWYgKCFjYW52YXMpIHJldHVyblxuXG4gICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5oYW5kbGVQb2ludGVyTW92ZSlcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLmhhbmRsZVBvaW50ZXJEb3duKVxuICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCB0aGlzLmhhbmRsZVBvaW50ZXJVcClcbiAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyY2FuY2VsXCIsIHRoaXMuaGFuZGxlUG9pbnRlckNhbmNlbClcbiAgICAgICAgdGhpcy5fY2FudmFzID0gbnVsbFxuICAgIH1cblxuICAgIHByaXZhdGUgcmVhZG9ubHkgaGFuZGxlUG9pbnRlck1vdmUgPSAoZXZ0OiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5fY2FudmFzXG4gICAgICAgIGlmICghY2FudmFzKSByZXR1cm5cblxuICAgICAgICBjb25zdCB7IHgyY29sLCB5MnJvdyB9ID0gZ2V0Q29vcmRzKGNhbnZhcylcbiAgICAgICAgY29uc3QgY29sID0geDJjb2woZXZ0LmNsaWVudFgpXG4gICAgICAgIGNvbnN0IHJvdyA9IHkycm93KGV2dC5jbGllbnRZKVxuICAgICAgICBpZiAodGhpcy5wb2ludGVyRG93bikge1xuICAgICAgICAgICAgY29uc3QgeyBjb2wwLCByb3cwIH0gPSB0aGlzXG4gICAgICAgICAgICBsZXQgY29sMiA9IGNvbFxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGNvbDIgLSBjb2wwKSAlIDIgIT09IDApIHtcbiAgICAgICAgICAgICAgICBjb2wyICs9IGNvbDIgPiBjb2wwID8gKzEgOiAtMVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSB7XG4gICAgICAgICAgICAgICAgY29sMTogY29sMCxcbiAgICAgICAgICAgICAgICByb3cxOiByb3cwLFxuICAgICAgICAgICAgICAgIGNvbDIsXG4gICAgICAgICAgICAgICAgcm93Mjogcm93LFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbCA9PT0gdGhpcy5jdXJzb3JDb2wgJiYgcm93ID09PSB0aGlzLmN1cnNvclJvdykgcmV0dXJuXG5cbiAgICAgICAgdGhpcy5jdXJzb3JDb2wgPSBjb2xcbiAgICAgICAgdGhpcy5jdXJzb3JSb3cgPSByb3dcbiAgICAgICAgdGhpcy5wYWludCgpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBoYW5kbGVQb2ludGVyRG93biA9IChldnQ6IFBvaW50ZXJFdmVudCkgPT4ge1xuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLl9jYW52YXNcbiAgICAgICAgaWYgKCFjYW52YXMpIHJldHVyblxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRE9XTlwiKVxuICAgICAgICB0aGlzLnBvaW50ZXJEb3duID0gdHJ1ZVxuICAgICAgICBjb25zdCBjb2wgPSB0aGlzLmN1cnNvckNvbFxuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmN1cnNvclJvd1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHtcbiAgICAgICAgICAgIGNvbDE6IGNvbCxcbiAgICAgICAgICAgIHJvdzE6IHJvdyxcbiAgICAgICAgICAgIGNvbDI6IGNvbCxcbiAgICAgICAgICAgIHJvdzI6IHJvdyxcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbDAgPSBjb2xcbiAgICAgICAgdGhpcy5yb3cwID0gcm93XG4gICAgICAgIHRoaXMucGFpbnQoKVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVhZG9ubHkgaGFuZGxlUG9pbnRlclVwID0gKGV2dDogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMucG9pbnRlckRvd24gPSBmYWxzZVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVhZG9ubHkgaGFuZGxlUG9pbnRlckNhbmNlbCA9IChldnQ6IFBvaW50ZXJFdmVudCkgPT4ge1xuICAgICAgICB0aGlzLnBvaW50ZXJEb3duID0gZmFsc2VcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IHBhaW50ID0gKCkgPT4ge1xuICAgICAgICBnbG9iYWxUaGlzLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmKVxuICAgICAgICB0aGlzLnJhZiA9IGdsb2JhbFRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYWN0dWFsUGFpbnQpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWFkb25seSBhY3R1YWxQYWludCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jdHhcbiAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5fY2FudmFzXG4gICAgICAgIGlmICghY2FudmFzIHx8ICFjdHgpIHJldHVyblxuXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5jbGllbnRXaWR0aFxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLmNsaWVudEhlaWdodFxuICAgICAgICBjb25zdCB7IGNvbDJ4LCByb3cyeSB9ID0gZ2V0Q29vcmRzKGNhbnZhcylcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjb2wyeChDT0xTICsgMSksIHJvdzJ5KFJPV1MgKyAxKSlcbiAgICAgICAgY29uc3QgeyBjb2wxLCBjb2wyLCByb3cxLCByb3cyIH0gPSB0aGlzLnNlbGVjdGlvblxuICAgICAgICBjb25zb2xlLmRlYnVnKEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0aW9uKSlcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmdiYSgyNTUsMjU1LDI1NSwwLjEpXCJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjZmZmXCJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDRcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGN0eC5yZWN0KFxuICAgICAgICAgICAgY29sMngoY29sMSksXG4gICAgICAgICAgICByb3cyeShyb3cxKSxcbiAgICAgICAgICAgIGNvbDJ4KDIgKyBjb2wyIC0gY29sMSksXG4gICAgICAgICAgICByb3cyeSgxICsgcm93MiAtIHJvdzEpXG4gICAgICAgIClcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpXG4gICAgICAgIGN0eC5maWxsKClcbiAgICAgICAgY3R4LnN0cm9rZSgpXG4gICAgICAgIGNvbnN0IGNvbCA9IHRoaXMuY3Vyc29yQ29sXG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuY3Vyc29yUm93XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcInJnYmEoMCwyMDAsMjU1LDAuMSlcIlxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBcInJnYigwLDIwMCwyNTUpXCJcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGN0eC5yZWN0KGNvbDJ4KGNvbCksIHJvdzJ5KHJvdyksIGNvbDJ4KDIpLCByb3cyeSgxKSlcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpXG4gICAgICAgIGN0eC5maWxsKClcbiAgICAgICAgY3R4LnN0cm9rZSgpXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2VsZWN0aW9uVmlld2VyKCkge1xuICAgIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZjxTZWxlY3Rpb25WaWV3ZXIgfCBudWxsPihudWxsKVxuICAgIGlmICghcmVmLmN1cnJlbnQpIHJlZi5jdXJyZW50ID0gbmV3IFNlbGVjdGlvblZpZXdlcigpXG4gICAgcmV0dXJuIHJlZi5jdXJyZW50XG59XG5cbmZ1bmN0aW9uIGdldENvb3JkcyhjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBjYW52YXNcbiAgICByZXR1cm4ge1xuICAgICAgICB4MmNvbDogKHg6IG51bWJlcikgPT4gTWF0aC5mbG9vcigoQ09MUyAqIHgpIC8gd2lkdGgpLFxuICAgICAgICB5MnJvdzogKHk6IG51bWJlcikgPT4gTWF0aC5mbG9vcigoUk9XUyAqIHkpIC8gaGVpZ2h0KSxcbiAgICAgICAgY29sMng6IChjb2w6IG51bWJlcikgPT5cbiAgICAgICAgICAgIDAuNSArIE1hdGgucm91bmQoKHdpZHRoICogTWF0aC5mbG9vcihjb2wpKSAvIENPTFMpLFxuICAgICAgICByb3cyeTogKHJvdzogbnVtYmVyKSA9PlxuICAgICAgICAgICAgMC41ICsgTWF0aC5yb3VuZCgoaGVpZ2h0ICogTWF0aC5mbG9vcihyb3cpKSAvIFJPV1MpLFxuICAgIH1cbn1cbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbNl0udXNlWzFdIS4vcGFnZS5tb2R1bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbNl0udXNlWzFdIS4vcGFnZS5tb2R1bGUuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyB1c2VSb3V0ZVBhcmFtQXNJbnQgfSBmcm9tIFwiQC9hcHAvcm91dGVzXCI7XG5pbXBvcnQgTGV2ZWxQcmV2aWV3MDUgZnJvbSBcIkAvY29tcG9uZW50cy8wNS9MZXZlbFByZXZpZXcwNVwiO1xuaW1wb3J0IHsgdXNlQXJrYW5vaWRMZXZlbHMgfSBmcm9tIFwiQC9nYW1lLzA1L2xldmVsc1wiO1xuXG5pbXBvcnQgU2VsZWN0aW9uTGF5ZXIgZnJvbSBcIi4vXy9TZWxlY3Rpb25MYXllclwiO1xuaW1wb3J0IHsgdXNlS2V5Ym9hcmQgfSBmcm9tIFwiLi9fL1NlbGVjdGlvbkxheWVyL2tleWJvYXJkXCI7XG5pbXBvcnQgeyB1c2VTZWxlY3Rpb25WaWV3ZXIgfSBmcm9tIFwiLi9fL1NlbGVjdGlvbkxheWVyL3ZpZXdlclwiO1xuaW1wb3J0IHN0eWxlcyBmcm9tIFwiLi9wYWdlLm1vZHVsZS5jc3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFnZTA1KCkge1xuXHRjb25zdCBsZXZlbEluZGV4ID0gdXNlUm91dGVQYXJhbUFzSW50KFwibGV2ZWxJbmRleFwiKTtcblx0Y29uc3QgeyBsZXZlbHMgfSA9IHVzZUFya2Fub2lkTGV2ZWxzKCk7XG5cdGNvbnN0IGxldmVsID0gbGV2ZWxzW2xldmVsSW5kZXhdO1xuXHRjb25zdCB2aWV3ZXIgPSB1c2VTZWxlY3Rpb25WaWV3ZXIoKTtcblx0dXNlS2V5Ym9hcmQoe1xuICAgICAgICBcIitcIjogdmlld2VyLmdyb3dTZWxlY3Rpb24sXG4gICAgICAgIFwiLVwiOiB2aWV3ZXIuc2hyaW5rU2VsZWN0aW9uLFxuICAgICAgICBcIkFycm93UmlnaHRcIjogdmlld2VyLm1vdmVSaWdodCxcbiAgICAgICAgXCJBcnJvd0xlZnRcIjogdmlld2VyLm1vdmVMZWZ0LFxuICAgICAgICBcIkFycm93VXBcIjogdmlld2VyLm1vdmVVcCxcbiAgICAgICAgXCJBcnJvd0Rvd25cIjogdmlld2VyLm1vdmVEb3duLFxuICAgICAgICBcIlMtQXJyb3dSaWdodFwiOiB2aWV3ZXIuZ3Jvd1JpZ2h0LFxuICAgICAgICBcIlMtQXJyb3dMZWZ0XCI6IHZpZXdlci5ncm93TGVmdCxcbiAgICAgICAgXCJTLUFycm93VXBcIjogdmlld2VyLmdyb3dVcCxcbiAgICAgICAgXCJTLUFycm93RG93blwiOiB2aWV3ZXIuZ3Jvd0Rvd24sXG4gICAgICAgIFwiQS1BcnJvd1JpZ2h0XCI6IHZpZXdlci5zaHJpbmtSaWdodCxcbiAgICAgICAgXCJBLUFycm93TGVmdFwiOiB2aWV3ZXIuc2hyaW5rTGVmdCxcbiAgICAgICAgXCJBLUFycm93VXBcIjogdmlld2VyLnNocmlua1VwLFxuICAgICAgICBcIkEtQXJyb3dEb3duXCI6IHZpZXdlci5zaHJpbmtEb3duLFxuICAgIH0pO1xuXG5cdHJldHVybiAoXG5cdFx0PGRpdiBjbGFzc05hbWU9e3N0eWxlcy5wYWdlfT5cblx0XHRcdDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMucHJldmlld30+XG5cdFx0XHRcdDxMZXZlbFByZXZpZXcwNSBsZXZlbD17bGV2ZWx9IC8+XG5cdFx0XHRcdDxTZWxlY3Rpb25MYXllciB2aWV3ZXI9e3ZpZXdlcn0gLz5cblx0XHRcdDwvZGl2PlxuXHRcdFx0PG5hdj5cblx0XHRcdFx0PGgxPkxldmVsIHtsZXZlbEluZGV4fTwvaDE+XG5cdFx0XHQ8L25hdj5cblx0XHQ8L2Rpdj5cblx0KTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIlxuXG5leHBvcnQgZnVuY3Rpb24gdXNlS2V5Ym9hcmQobGlzdGVuZXJzOiBSZWNvcmQ8c3RyaW5nLCAoKSA9PiB2b2lkPikge1xuICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgaWQgPSBldnQua2V5XG4gICAgICAgICAgICBpZiAoZXZ0LnNoaWZ0S2V5KSBpZCA9IGBTLSR7aWR9YFxuICAgICAgICAgICAgaWYgKGV2dC5hbHRLZXkpIGlkID0gYEEtJHtpZH1gXG4gICAgICAgICAgICBjb25zdCBhY3Rpb24gPSBsaXN0ZW5lcnNbaWRdXG4gICAgICAgICAgICBpZiAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICBhY3Rpb24oKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIvCfkJ4gW2tleWJvYXJkQDhdIGlkID1cIiwgaWQpIC8vIEBGSVhNRTogUmVtb3ZlIHRoaXMgbGluZSB3cml0dGVuIG9uIDIwMjYtMDItMTIgYXQgMTA6MDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnbG9iYWxUaGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleURvd24pXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBnbG9iYWxUaGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleURvd24pXG4gICAgICAgIH1cbiAgICB9LCBbbGlzdGVuZXJzXSlcbn1cbiJdLCJuYW1lcyI6WyJfX19DU1NfTE9BREVSX0VYUE9SVF9fXyIsInB1c2giLCJtb2R1bGUiLCJpZCIsImxvY2FscyIsIm9wdGlvbnMiLCJzdHlsZVRhZ1RyYW5zZm9ybSIsInNldEF0dHJpYnV0ZXMiLCJpbnNlcnQiLCJkb21BUEkiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJTZWxlY3Rpb25MYXllciIsImNsYXNzTmFtZSIsInZpZXdlciIsImpvaW4iLCJzZWxlY3Rpb25MYXllciIsInJlZiIsImluaXQiLCJjbGFzc2VzIiwiZmlsdGVyIiwiY2xzIiwiU2VsZWN0aW9uVmlld2VyIiwiX2NhbnZhcyIsImN0eCIsImN1cnNvckNvbCIsImN1cnNvclJvdyIsInJhZiIsIl9zZWxlY3Rpb24iLCJjb2wxIiwicm93MSIsImNvbDIiLCJDT0xTIiwicm93MiIsIlJPV1MiLCJwb2ludGVyRG93biIsImNvbDAiLCJyb3cwIiwiY2FudmFzIiwidGhpcyIsImRldGFjaCIsImdldENvbnRleHQiLCJwYWludCIsImF0dGFjaCIsImdyb3dTZWxlY3Rpb24iLCJzZWxlY3Rpb24iLCJncm93VXAiLCJncm93RG93biIsImdyb3dSaWdodCIsImdyb3dMZWZ0Iiwic2hyaW5rVXAiLCJzaHJpbmtEb3duIiwic2hyaW5rUmlnaHQiLCJzaHJpbmtMZWZ0Iiwic2hyaW5rU2VsZWN0aW9uIiwibW92ZVNlbGVjdGlvbiIsImNvbCIsInJvdyIsIm1vdmVSaWdodCIsIm1vdmVMZWZ0IiwibW92ZVVwIiwibW92ZURvd24iLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlUG9pbnRlck1vdmUiLCJoYW5kbGVQb2ludGVyRG93biIsImhhbmRsZVBvaW50ZXJVcCIsImhhbmRsZVBvaW50ZXJDYW5jZWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwieDJjb2wiLCJ5MnJvdyIsImdldENvb3JkcyIsImNsaWVudFgiLCJjbGllbnRZIiwiTWF0aCIsImFicyIsImNvbnNvbGUiLCJsb2ciLCJnbG9iYWxUaGlzIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJhY3R1YWxQYWludCIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJjb2wyeCIsInJvdzJ5IiwiY2xlYXJSZWN0IiwiZGVidWciLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsbFN0eWxlIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJyZWN0IiwiY2xvc2VQYXRoIiwiZmlsbCIsInN0cm9rZSIsIm1pbiIsIm1heCIsIngiLCJmbG9vciIsInkiLCJyb3VuZCIsIlBhZ2UwNSIsImxldmVsSW5kZXgiLCJsZXZlbHMiLCJsZXZlbCIsImN1cnJlbnQiLCJ1c2VTZWxlY3Rpb25WaWV3ZXIiLCJsaXN0ZW5lcnMiLCJoYW5kbGVLZXlEb3duIiwia2V5Iiwic2hpZnRLZXkiLCJhbHRLZXkiLCJhY3Rpb24iLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImRvY3VtZW50IiwicGFnZSIsInByZXZpZXciLCJMZXZlbFByZXZpZXcwNSJdLCJzb3VyY2VSb290IjoiIn0=